<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>archlinux</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="../../../wikicss.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="archlinux安装配置">archlinux安装配置</h1>
<h3 id="系统安装">系统安装</h3>
<p>按照wiki走一遍，不行就再来一遍。有可能踩坑：</p>
<ul>
<li>和win10共享ESP分区的话，100Mb 不够用，而且win10更新会导致 grub
错误。建议扩大 ESP 分区</li>
<li>命令行状态下要装好网络包</li>
<li>自动挂载移动硬盘和U盘，安装 <code>ntfs-3g udevil</code>
，同时当前用户要增加权限。解决弹出提示输入密码的问题：<a
href="https://askubuntu.com/questions/552503/stop-asking-for-authentication-to-mount-usb-stick">链接</a></li>
</ul>
<h3 id="mirrors">mirrors</h3>
<p><code>/etc/pacman.d/mirrorlist</code></p>
<p>生成地址： https://archlinux.org/mirrorlist/</p>
<h3 id="yay">yay</h3>
<p>yay -Ps 现状展示 yay -Qu 查看待升级的包 yay -Sc 清理</p>
<h3 id="字体">字体</h3>
<p>查看中文字体： <code>fc-list :lang=zh</code>
可以看到字体名，便于配置软件</p>
<ul>
<li>等宽字体： <code>pacman -S ttf-dejavu</code>
<code>pacman -S otf-fira-mono</code></li>
<li>emoji： <code>noto-fonts-emoji</code></li>
<li>谷歌东亚字体：<code>noto-fonts-cjk</code></li>
<li>文泉驿微米黑：<code>wqy-microhei</code></li>
<li>思源宋体和黑体： adobe-source-han-serif-cn-fonts 和
adobe-source-han-sans-cn-fonts</li>
<li>简体中文等距更纱黑体+Nerd图标字体库。
<code>yay -S nerd-fonts-sarasa-mono</code></li>
</ul>
<p>自己安装的字体放到 <code>~/.local/share/fonts</code></p>
<p>适合阅读和电纸书的字体</p>
<ul>
<li>仓耳今楷</li>
<li>方正悠宋</li>
<li>方正宋刻本秀楷</li>
</ul>
<h3 id="xfce4">XFCE4</h3>
<p>声音：安装 alsa-utils 和
pulseaudio。安装　<code>xfce4-pulseaudio-plugin</code>
，面板添加音量图标。</p>
<p>主题： arc-gtk-theme 图标： papirus-icon-theme</p>
<p>配置桌面快捷键：</p>
<ul>
<li>窗口移动：win+方向键</li>
<li>隐藏所有窗口：win+D</li>
<li>启动器：win+1</li>
<li>截图：flameshot gui &gt; win+3</li>
</ul>
<p>壁纸位置在：~/.local/share/xfce4/backdrops/</p>
<h3 id="网络">网络</h3>
<p>查询本机ip： <code>$curl ipinfo.io</code></p>
<h3 id="terminal使用代理">terminal使用代理</h3>
<pre><code>alias setproxy=&quot;export ALL_PROXY=socks5://127.0.0.1:1080&quot;
alias unsetproxy=&quot;unset ALL_PROXY&quot;
aliass ip=&quot;curl ipinfo.io&quot;</code></pre>
<h3 id="启动">启动</h3>
<p>Uluancher
https://ulauncher.io/　，简单高效。无论用哪个平台都应该又一款趁手的启动器。</p>
<h3 id="文件管理">文件管理</h3>
<p>解压缩：File Roller ，文件搜索：catfish</p>
<p>访问共享，安装 <code>gvfs-smb</code></p>
<h3 id="浏览器">浏览器</h3>
<p>Chrome 同步难但易用，Firefox 在我这里总有小问题。</p>
<h3 id="输入法">输入法</h3>
<p>选择 fcitx5 和 rime ，使用：</p>
<ul>
<li>四叶草拼音方案 https://github.com/fkxxyz/rime-cloverpinyin</li>
<li>皮肤 https://github.com/hosxy/Fcitx5-Material-Color 修改成了#666666
灰色</li>
</ul>
<p>比起默认的拼音更适合简体中文用户。一些快捷键：</p>
<ul>
<li>F4 设置菜单</li>
<li>shift+空格 切换全角/半角</li>
<li>ctrl+shift+3 切换emoji</li>
</ul>
<h3 id="图片">图片</h3>
<p>编辑器用 GIMP，用惯了也还好。看图用 ristretto ，看漫画可以用 MComix
或 Foliate。截图用火焰截图 <a
href="https://github.com/lupoDharkael/flameshot">Flameshot</a>
，截图可以绑定快捷键到 <code>flameshot gui</code></p>
<h3 id="影音">影音</h3>
<p>MPV 主力播放， VLC 可以看网络直播流，也适合播放整个文件夹。音乐播放用
Audacious ，需要编辑音乐信息装一个 Kid3。听在线音乐可以用 <a
href="https://listen1.github.io/listen1/">Listen 1 音乐播放器</a>
。录音用 yAudacity。</p>
<p>VLC可以批量转换音频视频。</p>
<h4 id="mpv显示两个字幕">mpv显示两个字幕</h4>
<p>mpv some-video.mp4 –sub-file=sub1.srt –sub-file=sub2.srt
–secondary-sid=2</p>
<p>在线工具合并两个字幕：https://easypronunciation.com/zh/merge-two-subtitle-files-online</p>
<p>mpv调整字幕大小，在 ~/.config/mpv/input.conf 加入：</p>
<pre><code># increase subtitle font size
ALT+k add sub-scale +0.1

# decrease subtitle font size
ALT+j add sub-scale -0.1</code></pre>
<h3 id="电子书">电子书</h3>
<p>Calibre 安装好，导入书库。需要编辑epub 可以安装
Sigil，有打包电子书的需要装 pandoc ，安装
<code>yay -S pandoc-bin</code></p>
<p>pdf浏览就装 Evince ，剪裁工具 <a
href="http://arminstraub.com/software/krop">krop</a> rs</p>
<h3 id="pdftk">pdftk</h3>
<ul>
<li><p>提取pdf信息
<code>pdftk 1.pdf dump_data output out.txt</code></p></li>
<li><p>更新pdf信息
<code>pdftk 1.pdf update_info out.txt output new.pdf</code></p></li>
<li><p>合并 <code>pdftk file1.pdf file2.pdf cat output output.pdf</code>
### qpdf</p></li>
<li><p>拆分pdf
<code>qpdf --empty --pages infile.pdf 1-5 -- outfile.pdf</code></p></li>
<li><p>拆分pdf的简单方法是用内置pdf浏览器打印到pdf文件！</p></li>
</ul>
<pre><code>
### 编辑器

Typora 收费后，直接全部用 Obsidian 解决笔记问题，markdown无敌。单个文件用系统自带的 mousepad 打开。LibreOffice 或者用在线文档对付msoffice格式。
</code></pre>
<p>sudo pacman -S libreoffice-still libreoffice-still-zh-cn ```</p>
<h3 id="rss">RSS</h3>
<p><a href="https://quiterss.org/">QuiteRss</a>
支持socks5代理，自定义快捷键。之前用了几年<a
href="https://lzone.de/liferea/">Liferea</a></p>
<p>### 下载</p>
<p>wget / <a href="https://github.com/iawia002/lux">lux-dl</a> /
youtube-dl / qbittorrent / <a
href="https://github.com/mayswind/AriaNg">AriaNg</a></p>
<p>阿里云推荐用：阿里云盘小白羊版
https://github.com/liupan1890/aliyunpan</p>
<h3 id="即时通讯">即时通讯</h3>
<p>微信，尝试了几种包括统信UOS
版，现在使用web版凑合，使用率并不高。可以用下面命令开一个独立窗口。google-chrome-stable
–new-window –app=https://wx.qq.com</p>
<h3 id="网盘">网盘</h3>
<p>坚果云打开后白屏，按照<a
href="https://blog.zhullyb.top/2021/10/02/nutstore-guide-on-archlinux-kde/">这里的提示</a>，执行：</p>
<p><code>sudo sed -i 's|webui.enable=true|webui.enable=false|' /opt/nutstore/conf/nutstore.properties</code></p>
<p>2022.5 坚果云会默认安装轻应用，会自动关联md格式，已放弃。改用
Syncthing</p>
<h3 id="外语学习">外语学习</h3>
<p>GoldenDict 和 anki 装好每天都用</p>
<h3 id="git-ssh">Git / SSH</h3>
<p>安装并配置连接github</p>
<h3 id="其他问题">其他问题</h3>
<h4 id="浏览器无法打开telegram-链接">浏览器无法打开telegram 链接</h4>
<p>`<code>~/.local/share/applications</code> 找到 userapp-Telegram
Desktop-xxxx.desktop ,在文件的最后添加一行：</p>
<p><code>MimeType=application/x-xdg-protocol-tg;x-scheme-handler/tg;</code></p>
<h4 id="pacman错误">pacman错误</h4>
<p>invalid pgp key错误解决 :
<code>$ sudo pacman-key --refresh-keys</code></p>
<p>pacman -Syu 升级系统 pacman -Syy 同步软件列表 pacman -Scc 清理软件包
pacman -S xxx 安装 pacman -Ss xxx 查询 pacman -R xxx 卸载 pacman -Qs xxx
查询已安装包</p>
<h4 id="环境变量">环境变量</h4>
<p>编辑 <code>~/.bashrc</code>，加入</p>
<p><code>export PATH=$PATH:/somepath</code></p>
<h2 id="old">old</h2>
<hr />
<h3 id="电源">电源</h3>
<p>编辑： /etc/systemd/logind.conf
加入以下两行，实现笔记本合盖挂起系统：</p>
<pre><code>HandleLidSwitch=suspend
HandleLidSwitchExternalPower=suspend</code></pre>
<p>然后执行：<code>systemctl restart systemd-logind</code></p>
<p>使用xfce后默认锁屏是xfce4-screensaver，调用
xflock4，黑屏无提示。卸载掉 xfce4-screensaver ，安装</p>
<p><code>sudo pacman -S light-locker</code>
<code>yay light-locker-settings</code></p>
<p>然后在 设置&gt;配置编辑器&gt;xfce4-session&gt;general&gt;LockCommand
加入</p>
<p><code>light-locker-command --lock</code></p>
<p>则可以使用 ctrl+alt +L 锁定，返回 lightdm登录界面。可以安装
lightdm-gtk-greeter-settings 进一步美化登录界面。</p>
<p>!!! 问题，关闭笔记本盖子再打开，屏幕会出现</p>
<p>#: ../src/xfpm-power.c:436 msgid “” “None of the screen lock tools
ran successfully, the screen will not be locked.” “Do you still want to
continue to suspend the system?” msgstr
“嘿，所有锁屏工具都不能正常运行呢，所以我就无法锁定屏幕啦。？”</p>
<p>edit /usr/bin/xflock4</p>
<h2 id="软件">软件</h2>
<h3 id="ssh-and-git">SSH and git</h3>
<ul>
<li>安装 openssh git</li>
<li>创建本地ssh
key：<code>ssh-keygen -t rsa -C "youremail@example.com"</code></li>
<li>复制 <code>~.ssh/id_rsa.pub</code> 内容到github-Account settings-SSH
Keys，Title随意</li>
<li>配置git，参考：https://www.runoob.com/w3cnote/git-guide.html</li>
</ul>
<h3 id="syncthing">Syncthing</h3>
<ul>
<li>安装 syncthing / syncthing-gtk</li>
<li>加入服务：
<code>sudo systemctl enable syncthing@laodu.service</code></li>
<li>启动服务：
<code>sudo systemctl start syncthing@laodu.service</code></li>
<li>本机地址： http://127.0.0.1:8384/</li>
</ul>
<h2 id="结语">结语</h2>
<p>奥卡姆剃刀原则说：如无必要、勿增实体。够用好用，还要怎样？</p>
<hr />
<p>参考：</p>
<ul>
<li><p>https://oscarcx.com/tech/manjaro-xfce-setup.html</p></li>
<li><p>20191029 创建</p></li>
<li><p>20220304 更新</p></li>
</ul>
</body>
</html>
